import{U as R,r as I,s as m,ab as g,ac as G,_ as P,Z as c,a8 as k,a3 as n,a6 as l,a2 as f,c as z,ad as A,ae as D,h as V,af as j,ag as J,w as K,$ as S,a0 as N,Q as H,ah as W,a1 as Y,a4 as F,ai as L,a5 as ee,aj as te,ak as ne,X as ae,al as ie,a9 as O,aa as Q,am as se,an as re,ao as oe,ap as le}from"./index-BIJqBQ0Y.js";import{Q as ce}from"./QCheckbox-wE3V3brH.js";const de=R({__name:"RecipeIngredient",props:{ingredient:{type:Object,required:!0},servings:{type:Number,default:1}},setup(s,{expose:r}){r();const o=s,e=I(!1),d=m(()=>{const{servings:t}=o,{quantity:v,unit:_}=o.ingredient;return p(v,_,t)}),p=(t,v,_=1)=>{if(t==null)return"";const y=t*_;let h="";return y%1===0?h=Math.round(t).toString():h=y.toFixed(2),v==="g"?h=`${Math.round(t*.035274)} oz`:v==="ml"&&(h=`${Math.round(t*.033814)} fl oz`),`${h} ${v||""}`.trim()},i={props:o,checked:e,formattedAmount:d,formatAmount:p,get getTranslation(){return g},get formatName(){return G}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),ue={class:"ingredient-table"},me={class:"ingredient-row"},pe={class:"ingredient-name"},ge={class:"ingredient-quantity"},ve={class:"ingredient-checkbox"};function _e(s,r,o,e,d,p){return c(),k("div",ue,[n("div",me,[n("div",pe,l(e.formatName(e.getTranslation(o.ingredient.ingredient.name))),1),n("div",ge,l(e.formattedAmount),1),n("div",ve,[f(ce,{modelValue:e.checked,"onUpdate:modelValue":r[0]||(r[0]=i=>e.checked=i),color:"primary"},null,8,["modelValue"])])])])}const he=P(de,[["render",_e],["__scopeId","data-v-2a6833cb"],["__file","RecipeIngredient.vue"]]),fe='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',be=z({name:"QSpinnerDots",props:A,setup(s){const{cSize:r,classes:o}=D(s);return()=>V("svg",{class:o.value,fill:"currentColor",width:r.value,height:r.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:fe})}}),ye='<rect y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="30" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="60" width="15" height="140" rx="6"><animate attributeName="height" begin="0s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="90" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.25s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.25s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect><rect x="120" y="10" width="15" height="120" rx="6"><animate attributeName="height" begin="0.5s" dur="1s" values="120;110;100;90;80;70;60;50;40;140;120" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="y" begin="0.5s" dur="1s" values="10;15;20;25;30;35;40;45;50;0;10" calcMode="linear" repeatCount="indefinite"></animate></rect>',we=z({name:"QSpinnerBars",props:A,setup(s){const{cSize:r,classes:o}=D(s);return()=>V("svg",{class:o.value,fill:"currentColor",width:r.value,height:r.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",innerHTML:ye})}}),xe=R({__name:"LlmButton",props:{taskType:{},input:{},icon:{default:"mdi-creation"},buttonText:{default:""},taskParams:{default:()=>({})}},emits:["on-output","on-error","on-start"],setup(s,{expose:r,emit:o}){r();const e=s,d=o,{t:p}=j(),i=J(e.taskType),t=m(()=>!i.isRunning.value),v=m(()=>i.status.value==="download"),_=m(()=>i.downloadProgress.value),y=m(()=>i.cleanedData.value),h=m(()=>e.buttonText||p(`llm.tasks.${e.taskType}`));K(y,C=>{C&&d("on-output",C)});async function B(){try{d("on-start"),i.exec(e.input)}catch(C){d("on-error",C)}}const T={props:e,emit:d,t:p,transformer:i,taskFinished:t,modelDownloading:v,modelDownloadProgress:_,result:y,buttonText:h,executeTask:B};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}}),ke={class:"row items-center"},Te={class:"q-ml-sm"},Ce={class:"row items-center"};function Me(s,r,o,e,d,p){return e.result?L("",!0):(c(),S(F,{key:0,class:Y(["q-mt-md llm-task-button",{loading:e.modelDownloading}]),loading:!e.taskFinished,onClick:e.executeTask},{loading:N(()=>[n("div",ke,[e.modelDownloading?(c(),S(be,{key:0,color:"white",class:"on-left",size:"1.5em"})):(c(),S(we,{key:1,color:"white",class:"on-left",size:"1.5em"})),n("span",Te,l(e.modelDownloading?`${s.$t("llm.downloading")} ${e.modelDownloadProgress}%`:s.$t("llm.processing")),1)])]),default:N(()=>[n("div",Ce,[f(H,{name:o.icon,class:"q-mr-sm"},null,8,["name"]),W(s.$slots,"button-text",{},()=>[ee(l(e.buttonText),1)],!0)])]),_:3},8,["class","loading"]))}const Ne=P(xe,[["render",Me],["__scopeId","data-v-842a932d"],["__file","LlmButton.vue"]]),Se=R({__name:"RecipePage",setup(s,{expose:r}){r();const{t:o,locale:e}=j(),d=te(),p=ne(),{recipeMap:i}=ae(p),t=m(()=>{let a=d.params.id;return Array.isArray(a)&&([a]=a),a?i.value.get(a):void 0}),v=m(()=>(t.value?.ingredients??[]).map(a=>g(a.ingredient.name))),_=I(t.value?.servings??1);function y(){const a=g(t.value?.name),u=window.location.href;navigator.share({title:a,text:a,url:u})}const h=I(null),B=m(()=>{let a="";const u=g(t.value?.name);u&&(a+=`The recipe is called "${u}". `);const w=t.value?.duration,x=_.value;(w||x)&&(a+="Here are some details: ",w&&(a+=`it takes about ${w} minutes to prepare. `),x&&(a+=`This recipe serves ${x} people. `));const M=t.value?.steps?.map(b=>g(b.description)??"").filter(Boolean).join(". ")??"";return M&&(a+=`The steps to make this dish are as follows: ${M}.`),a}),T=I(null),C=m(()=>{const a=[];return a.push(g(t.value?.name)),a.push(g(t.value?.description)),a.push(...(t.value?.ingredients??[]).map(u=>g(u.ingredient.name))),a.push(...(t.value?.steps??[]).map(u=>g(u.description))),{input:a,sourceLanguage:t.value?.props?.language??"en",targetLanguage:e.value??"de"}}),U=m(()=>{try{if(!t.value)return[];const{steps:a}=t.value;if(!Array.isArray(a))return[];const u=Array.isArray(T.value)?T.value:[];return a.map((w,x)=>{const M=x+2+(t.value?.ingredients?.length??0),X=u[M]??g(w.description),Z=v.value??[];return q(X,Z)})}catch{return[]}}),E=m(()=>t.value?[{icon:"⏱️",value:`${t.value.duration} ${o("units.minutes",{count:t.value.duration})}`},{icon:"👥",value:`${_.value} ${o("recipe.servings",{count:_.value})}`},...t?.value?.props.tags?.map(a=>({icon:"🏷️",value:a}))??[]]:[]);function q(a,u){const w=a.trim(),x=u.flatMap(b=>b.split(/\s+/)).map(b=>b.replace(/[.*+?^${}()|[\]\\\d+]/g,"\\$&")),M=new RegExp(x.join("|"),"gi");return w.replace(M,b=>`<span class="highlight">${b}</span>`)}const $={t:o,locale:e,route:d,recipeStore:p,recipeMap:i,recipe:t,recipeIngredients:v,servings:_,shareRecipe:y,summaryOutput:h,summaryInput:B,translationOutput:T,translationInput:C,recipeSteps:U,metaItems:E,highlightIngredients:q,get getTranslation(){return g},RecipeIngredient:he,LlmButton:Ne};return Object.defineProperty($,"__isScriptSetup",{enumerable:!1,value:!0}),$}}),Ie={class:"recipe-header"},Le={class:"header-content"},Be={class:"content-wrapper"},Oe={key:0,class:"image-wrapper"},Qe=["src","alt"],Re={class:"recipe-details"},Pe={class:"recipe-title"},qe={class:"recipe-description"},$e={class:"recipe-meta"},ze={class:"meta-icon"},Ae={class:"meta-value"},De={class:"q-mt-md"},Ve={class:"llm-section"},je={key:0,class:"summary-section"},He={class:"recipe-summary-container"},Fe=["innerHTML"],Ue={class:"text-caption q-mt-sm"},Ee={class:"recipe-content"},Xe={class:"ingredients-section"},Ze={class:"section-title"},Ge={class:"servings-control"},Je={class:"servings-label"},Ke={class:"steps-section"},We={class:"section-title"},Ye={class:"steps-container"},et={class:"step-header"},tt={class:"step-number"},nt={class:"step-description"},at=["innerHTML"];function it(s,r,o,e,d,p){return e.recipe?(c(),S(ie,{key:0,class:"recipe-container"},{default:N(()=>[n("div",Ie,[n("div",Le,[n("div",Be,[e.recipe.image_url?(c(),k("div",Oe,[n("img",{src:e.recipe.image_url,alt:e.getTranslation(e.recipe.name),class:"recipe-image",loading:"lazy"},null,8,Qe)])):L("",!0),n("div",Re,[n("h1",Pe,l(e.getTranslation(e.recipe.name)),1),n("span",qe,l(e.getTranslation(e.recipe.description)),1),n("div",$e,[(c(!0),k(Q,null,O(e.metaItems,(i,t)=>(c(),k("div",{key:t,class:"meta-item"},[n("span",ze,l(i.icon),1),n("span",Ae,l(i.value),1)]))),128))]),n("div",De,[f(F,{color:"primary",class:"q-mr-sm",icon:"share",label:s.$t("recipe.share"),onClick:e.shareRecipe},null,8,["label"])]),n("div",Ve,[f(e.LlmButton,{class:"recipe-summary-button q-mt-md","task-type":"summarization",input:e.summaryInput,"button-text":s.$t("llm.summarize"),icon:"mdi-creation",onOnOutput:r[0]||(r[0]=i=>e.summaryOutput=i)},null,8,["input","button-text"]),f(e.LlmButton,{class:"recipe-summary-button q-mt-md","task-type":"translation",input:e.translationInput,"button-text":s.$t("llm.translate"),icon:"mdi-translate",onOnOutput:r[1]||(r[1]=i=>e.translationOutput=i)},null,8,["input","button-text"])]),e.summaryOutput?(c(),k("div",je,[n("div",He,[f(H,{name:"mdi-lightbulb-on-outline",class:"icon"}),n("div",{class:"recipe-summary",innerHTML:e.summaryOutput},null,8,Fe)]),n("div",Ue,l(s.$t("llm.disclaimer")),1)])):L("",!0)])])])]),n("div",Ee,[n("div",Xe,[n("h2",Ze,l(e.recipe.ingredients?.length??0)+" "+l(s.$t("recipe.ingredients",{count:e.recipe.ingredients?.length??0})),1),n("div",Ge,[n("label",Je,l(s.$t("recipe.adjustServings")),1),f(se,{modelValue:e.servings,"onUpdate:modelValue":r[2]||(r[2]=i=>e.servings=i),min:1,max:e.recipe.servings*2,color:"primary","track-color":"grey-3",class:"servings-slider","label-value":`${e.servings} ${s.$t("recipe.servings",{count:e.servings})}`,"label-always":""},null,8,["modelValue","max","label-value"])]),f(re,{class:"ingredients-list"},{default:N(()=>[(c(!0),k(Q,null,O(e.recipe.ingredients,(i,t)=>(c(),S(e.RecipeIngredient,{key:t,ingredient:i,servings:e.servings},null,8,["ingredient","servings"]))),128))]),_:1})]),n("div",Ke,[n("h2",We,l(e.recipe.steps?.length??0)+" "+l(s.$t("recipe.directions",{count:e.recipe.steps?.length??0})),1),n("div",Ye,[(c(!0),k(Q,null,O(e.recipeSteps,(i,t)=>(c(),S(oe,{key:t,class:"step-card"},{default:N(()=>[f(le,null,{default:N(()=>[n("div",et,[n("div",tt,l(s.$t("recipe.directions",{count:1}))+" "+l(t+1),1)]),n("div",nt,[n("div",{innerHTML:i},null,8,at)])]),_:2},1024)]),_:2},1024))),128))])])])]),_:1})):L("",!0)}const ot=P(Se,[["render",it],["__scopeId","data-v-af9bbff9"],["__file","RecipePage.vue"]]);export{ot as default};
