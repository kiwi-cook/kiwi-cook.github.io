import{c as m,G as y,H as p,O as x,s as w,h as C,C as $,J as L,aA as P,g as E,U as K,_ as Q,Z as f,a8 as g,ai as R,a2 as h,a0 as S,aB as b,aC as k,aD as z,r as d,aE as c}from"./index-BIJqBQ0Y.js";const I=m({name:"QPageContainer",setup(a,{slots:r}){const{proxy:{$q:e}}=E(),t=y(L,p);if(t===p)return console.error("QPageContainer needs to be child of QLayout"),p;x(P,!0);const u=w(()=>{const s={};return t.header.space===!0&&(s.paddingTop=`${t.header.size}px`),t.right.space===!0&&(s[`padding${e.lang.rtl===!0?"Left":"Right"}`]=`${t.right.size}px`),t.footer.space===!0&&(s.paddingBottom=`${t.footer.size}px`),t.left.space===!0&&(s[`padding${e.lang.rtl===!0?"Right":"Left"}`]=`${t.left.size}px`),s});return()=>C("div",{class:"q-page-container",style:u.value},$(r.default))}}),B=K({__name:"KiwiLogo",props:{withText:{type:Boolean,default:!0}},setup(a,{expose:r}){r();const e={};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}}),T={class:"q-mt-sm kiwi-logo"},A={key:0,class:"title"};function U(a,r,e,t,u,s){return f(),g("div",T,[e.withText?(f(),g("span",A,"KiwiCook")):R("",!0),h(k,{class:"rounded-borders",size:"48px"},{default:S(()=>[h(b,{height:"36px",src:"/icons/icon-512x512.png",width:"36px"})]),_:1})])}const j=Q(B,[["render",U],["__scopeId","data-v-db3e5e02"],["__file","KiwiLogo.vue"]]),N=z("user",()=>{const a=d(null),r=d(!1),e=d(null),t=w(()=>!!a.value);async function u(n,i){r.value=!0,e.value=null;try{if(n&&i){const o=new URLSearchParams;o.append("username",n),o.append("password",i);const l=await c.post("/users/login",o,{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0});return a.value=l.data,{message:"Login successful"}}return a.value}catch{throw e.value="Authentication failed. Please try again.",new Error(e.value)}finally{r.value=!1}}async function s(){try{await c.post("/users/logout",{},{withCredentials:!0}),a.value=null}catch{throw e.value="Logout failed. Please try again.",new Error(e.value)}}async function v(n,i){if(r.value=!0,e.value=null,!n||!i)throw e.value="Please provide username and password",new Error(e.value);try{if(n&&i){const l=new URLSearchParams;l.append("username",n),l.append("password",i);const _=await c.post("/users/add",l,{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0});return a.value=_.data,{message:"Registration successful"}}const o=await c.get("/protected-route",{withCredentials:!0});return a.value=o.data,a.value}catch{throw e.value="Registration failed. Please try again.",new Error(e.value)}finally{r.value=!1}}return{user:a,isAuthenticated:t,loading:r,error:e,login:u,logout:s,register:v,clearError:()=>{e.value=null}}});export{j as K,I as Q,N as u};
